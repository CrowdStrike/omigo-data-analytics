<!doctype html>
<html>
<head>
  <script src="https://code.jquery.com/jquery-latest.min.js"></script>
  <script src="//d3js.org/d3.v7.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

  <script type="text/javascript">
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const myurl = "http://127.0.0.1:9001/get_timeline";
    window.onload = function() {
      d3.json(myurl, {
        method: "GET",
        credentials: "include",
        headers: { "Accept": "application/json" }
      }).then(function(data) {
        mermaid.initialize({
          startOnLoad: false,
          // securityLevel: 'loose', // Adjust based on your security needs
          // theme: 'default'
        });

        // render mermaid diagram
        const container = document.getElementById("mermaid")
        mermaid.render('mermaid-diagram', data["mermaid"])
          .then(result => {
            // Insert the rendered SVG
            container.innerHTML = result.svg;

            // Optional: Use D3 to further manipulate the SVG
            const svg = d3.select('#mermaid-container svg');
            svg
              .attr('width', 2800)
              .attr('height', 2000);
          });
      });
    }
  </script>
</head>
<body>
  <h2>Timeline</h2>
  <div id="mermaid" style="text-align: center;"></div>
</body>
</html>

